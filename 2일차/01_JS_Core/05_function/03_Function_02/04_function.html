<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title> 콜백함수 </title>
  <script>
   
  /*
    콜백함수: 함수자체를 매개변수(인수)로 받아서 본함수의 로직구현 부분을 마친후 그 매개변수로 받은 함수를 다시 호출하여 실행하는 함수 
    
    function 함수명(callback){ // 함수자체를 매개변수(인수)로 받음
      ...
      ...

      callback(결과) // 본함수의 로직처리후 매개변수로 받은 함수를 호출 실행 

    }

    function callback(){

      ...
      ...

    }

    - 로직을 분리하여 처리 - 코드의 효율성 ( 비동기 처리에서 많이 쓰임 )

  */   

  function calculator(callback){  // 전체 함수를 하나로 함침 ( 연산이 끝나고 실행할 함수를 매개변수로 연동 - 콜백함수 )  
  
    let num1;
    let op;
    let num2;
    let result;   

    // 필요한 변수들을 전역변수로 선언     

    init() // 데이터 값입력 부분을 중첩함수(내부함수)로 처리  - 코드 그룹화 
    conduct() // 데이터 비교처리 부분을 중첩함수(내부함수)로 처리  - 코드 그룹화 
    finish() // 최종결과 실행함수 - 코드 그룹화 

    function init(){

      num1=prompt("첫번째 숫자를 입력하세요");       
      op=prompt("연산자를 선택하세요");
      num2=prompt("두번째 숫자를 입력하세요")

      num1=parseInt(num1);
      num2=parseInt(num2);

    }  

    function conduct(){

      switch (op) {

        case "+":

          result = num1 + num2;
          break;

        case "-":

          result = num1 - num2;
          break;

        case "*":

          result = num1 * num2;
          break;

        case "/":

          result = num1 / num2;
          break;

        default:

          result = "지원하지 않는 연산자입니다. "

      }

      return result  

    }

    function finish(){
      //print1(result) 외부함수를 콜백해서 사용 ( 매개변수로 result를 적용 )
      //print2(result)
      callback(result) // 매개변수로 받은 콜백함수를 실행 ( 매개변수로 result를 적용 )
    }

  } 

  // 연산이 끝난후 실행할 함수를 콜백함수로 지정 

  /*
  주의) 콜백함수를 만들때도  매개변수로 지정 

  function print1(final_result){
    document.write("첫번째 숫자와 두번째 숫자의 연산결과는 "+ final_result +" 입니다.");
  }

  function print2(final_result){
    document.write("결과는 "+ final_result +" 입니다.");
  }
  */

  // 콜백함수를 리터럴 함수와 화살표 함수로 변경 ( 최종함수 밖에서 사용할수있도록 함수 밖에서 지정 - 내부함수일때는 밖에서 호출이 불가능 )

  const print1=(final_result)=>{document.write("첫번째 숫자와 두번째 숫자의 연산결과는 " + final_result + " 입니다.")} // ES6 보간식활용 
  const print2=(final_result)=>{document.write("결과는 "+ final_result + " 입니다.")}
  

  calculator(print1) // 실행할 콜백함수를 매개변수로 구분해서 실행가능 
  //calculator(print2) 
  
  
  
  </script>
</head>
<body>
  
</body>
</html>